<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="src/styles/reset.css" />
    <link rel="stylesheet" href="src/styles/mainBanner.css" />
    <link rel="stylesheet" href="src/styles/modal.css" />

    <style>
      .movie-card {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 40px;
        padding: 30px 0 30px 0;
        background-color: #1c3825;
      }

      .section {
        width: 300px;
        height: 400px;
        padding: 16px;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        background-size: cover;
        background-position: center;
        cursor: pointer;
      }
    </style>

    <script type="module">
      import { moviesData } from "/src/apis/fetchMovies.js";

      document.addEventListener("DOMContentLoaded", () => {
        const movieCardContainer = document.querySelector(".movie-card");
        const modal = document.querySelector(".modal");

        movieCardContainer.addEventListener("click", (event) => {
          const section = event.target.closest(".section");
          if (section) {
            const movieId = section.dataset.id;
            openModal(movieId);
          }
        });

        function openModal(movieId) {
          const movie = moviesData.find((movie) => movie.id == movieId);

          if (movie) {
            modal.innerHTML = `
              <img src="https://image.tmdb.org/t/p/w500${movie.poster}" class="modal-img">
              <div class="modal-content">
                <button onclick="closeModal()" class="close-btn">✕</button>
                <h2 class="modal-title">${movie.title}</h2>
                <p class="modal-vote">평점: ${movie.vote}</p>
                <p class="modal-overview">${movie.overview}</p>
              </div>
            `;

            modal.style.display = "flex";
          }
        }
      });
    </script>
  </head>

  <body>
    <div class="main-banner">
      <p class="since">SUMMER 2025</p>
      <input
        class="searchInput"
        type="search"
        placeholder="검색어를 입력하세요"
      />
    </div>

    <div class="movie-card"></div>
    <div class="modal"></div>
  </body>
</html>
